---
title: "Node.jsを利用した最近のアプリ開発環境事情"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

作成日時: 2025-11-06

個人的なもの

## Node.jsとパッケージマネージャーのversion管理

パッケージマネージャーは`pnpm`を最近使っているので、`package.json`と`pnpm-workspace.yaml`に以下の記述をしてversionを固定している。またGithub Actionsの`actions/setup-node`は`package.json`の`engines`を参照する設定があるので、そちらも合わせて利用している。

```package.json
{
  "engines": {
    "node": "22.20.0"
  },
  "packageManager": "pnpm@10.13.1",
}
```

```pnpm-workspace.yaml
engineStrict: true
packageManagerStrictVersion: true
```

`pnpm v9.7`以降がインストールされていれば、`managePackageManagerVersions: true`(デフォルト)により、`package.json`に指定のversionがインストールされるので便利。

## package.jsonのversion指定

デフォルトだと`pnpm add`等でパッケージをインストールするとversionがsemver指定になっているが、アプリ開発をしていてメリットに感じたことがないため、最近は固定している。以下の設定で固定にできる。

```pnpm-workspace.yaml
savePrefix: ''
```

## タスクランナー

`package.json`の`scripts`にコマンドを記述しているのを見るが、個人的にはタスクランナーは別で用意したい派なので、Makefileを代わりに使用している。`make`はmacOSやLinuxであればデフォルトで入っているので別途インストールの必要がないのが良い。

ただ最近は[mise](https://mise.jdx.dev/)も気になってるので、個人のプロジェクトではこちらを使い始めてる。
